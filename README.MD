# Шаблон для разработки телеграм бота :
## Stack технологий :

- Docker (docker-compose)
- PHP Laravel
- Longman/telegram-bot https://packagist.org/packages/longman/telegram-bot 
### Описание:
Шаблон для простого развёртывания телеграм бота на сервере, с автоматической генерацией самоподписного SSL сертификата  

### Шаблон содержит в себе следующие контейнеры:
    - NGINX
    - PHP-FPM
    - MYSQL
    - PHPMYADMIN 
### Корректная работа: 
    - Очереди и Schedule работают корректно
### Просмотр логов:
    - Просмотр логов всего приложения доступен в  корневой папке /logs
### Требования:
- Наличие Docker
- Наличие утилиты make
- Наличие openssl
### Последовательность действий для развертывания  
  ### ПРИМЕЧАНИЕ: все действия выполняются в корне проекта
- 0. Установка разрешений для папки с проектом, куда производился git clone:
    - chmod -R 777 <dirname>
- 1. Генерация SSL ключей, для этого необходимо прописать команду (в качестве параметра DOMAIN передается домен или IP адрес сервера): 
    - make genssl DOMAIN=YOUR_DOMAIN
- 2. Сборка приложения:
    - make build
- 3. Установка пакетов vendor:
    - make install
- 4. Миграция базы данных:
    - make migrate
### Подготовка приложения:
- 1. Установить значения имени и ключа бота из BotFather
    - Для этого перейти в /PatternBotTg/config/telegram.php
    - Установить значения
- 2. Установить вебхук в telegramApi, в API также будет автоматически передан сгенерированный SSL сертификат:   
    - переходим по ссылке {YOUR_DOMAIN}/setwebhook (Контроллер в web.php)  


